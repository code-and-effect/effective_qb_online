%h1.effective-page-title= @page_title

= card('Company') do
  - company_info = @api.company_info

  %table.table.table-sm
    %tbody
      %tr
        %td Name
        %td= company_info.company_name

      %tr
        %td Country
        %td= company_info.country

      %tr
        %td Customers
        %td= pluralize(@api.customers_count, 'customer')

      %tr
        %td Invoices
        %td= pluralize(@api.invoices_count, 'invoice')

      %tr
        %td OAuth2 Connection
        %td= link_to('Reconnect to Quickbooks Online', effective_qb_online.quickbooks_oauth_path)

- if Rails.env.development?
  = card('Test Credentials') do
    %p
      QB_REALM_ID=#{@api.realm.realm_id}
      %br
      QB_ACCESS_TOKEN=#{@api.realm.access_token}
      %br
      QB_REFRESH_TOKEN=#{@api.realm.refresh_token}

-# = card('Customers') do
-#   %table.table.table-sm
-#     %tbody
-#       - @api.customers.each do |customer|
-#         %tr
-#           %td= customer.id
-#           %td= customer.display_name
-#           %td= customer.attributes[:billing_address]

-# = card('Invoices') do
-#   %table.table.table-sm
-#     %tbody
-#       %t

-#       - @api.invoices.each do |invoice|
-#         %tr
-#           %td= invoice.id
-#           %td= invoice.txn_date
-#           %td
-#             = invoice.customer_ref.name
-#             (#{invoice.customer_ref.value})

-#           %td= number_to_currency(invoice.total)
-#           %td= number_to_currency(invoice.txn_tax_detail.total_tax)
